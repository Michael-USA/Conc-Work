<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The core function of MPI is getting data from point A to point B (where A and B are e.g. single processes, multiple processes, the filesystem, …). It offers facilities to describe that data (layout in memory, behavior under certain operators) that go beyound a start address and a number of bytes."><title>mpi::datatype - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9bb858ba049f1f21.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="mpi" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.1 (d5c2e9c34 2023-09-13)" data-channel="1.72.1" data-search-js="search-f6292fe389d70017.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ><script src="../../static.files/storage-59fd9b8ccb335783.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../mpi/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../mpi/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module datatype</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">mpi</a>::<wbr><a class="mod" href="#">datatype</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/mpi/datatype.rs.html#1-1568">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The core function of MPI is getting data from point A to point B (where A and B are e.g. single
processes, multiple processes, the filesystem, …). It offers facilities to describe that data
(layout in memory, behavior under certain operators) that go beyound a start address and a
number of bytes.</p>
<p>An MPI datatype describes a memory layout and semantics (e.g. in a collective reduce
operation). There are several pre-defined <code>SystemDatatype</code>s which directly correspond to Rust
primitive types, such as <code>MPI_DOUBLE</code> and <code>f64</code>. A direct relationship between a Rust type and
an MPI datatype is covered by the <code>Equivalence</code> trait. Starting from the
<code>SystemDatatype</code>s, the user can build various <code>UserDatatype</code>s, e.g. to describe the layout of a
struct (which should then implement <code>Equivalence</code>) or to intrusively describe parts of
an object in memory like all elements below the diagonal of a dense matrix stored in row-major
order.</p>
<h3 id="derived-datatypes"><a href="#derived-datatypes">Derived Datatypes</a></h3>
<p>Derived MPI datatypes can exist in either an “uncommitted” or “committed” state. Only
“committed” datatypes can be used in MPI communication. There is a cost to committing a
datatype: only a final aggregate type should be committed when building it from component
derived datatypes.</p>
<p>In order to represent the difference between committed and uncommitted <code>MPI_Datatype</code> objects,
two different flavors of types representing the “committed”-ness of the type are exposed.
Orthogonally, there are types representing both “owned” <code>MPI_Datatype</code> objects and “borrowed”
<code>MPI_Datatype</code> objects. This means there are four different types for <code>MPI_Datatype</code>:</p>
<ul>
<li><code>UserDatatype</code> represents a committed, owned <code>MPI_Datatype</code></li>
<li><code>DatatypeRef&lt;'_&gt;</code> represents a committed, borrowed <code>MPI_Datatype</code>.
<ul>
<li>All builtin types are <code>DatatypeRef&lt;'static&gt;</code></li>
</ul>
</li>
<li><code>UncommittedUserDatatype</code> represents an uncommitted, owned <code>MPI_Datatype</code></li>
<li><code>UncommittedDatatypeRef&lt;'_&gt;</code> represents an uncommitted, borrowed <code>MPI_Datatype</code></li>
</ul>
<p>Along with this, there are two traits that are applied to these types:</p>
<ul>
<li><code>UncommittedDatatype</code> indicates the type represents a possibly uncommitted <code>MPI_Datatype</code></li>
<li><code>Datatype</code> indicates the type represents a committed <code>MPI_Datatype</code></li>
</ul>
<p>An important concept here is that all committed <code>Datatype</code> objects are also
<code>UncommittedDatatype</code> objects. This may seem unintuitive at first, but as far as MPI is
concerned, “committing” a datatype is purely a promotion, enabling more capabilities. This
allows <code>Datatype</code> and <code>UncommittedDatatype</code> objects to be used interchangeably in the same
<code>Datatype</code> constructors.</p>
<p>For more information on derived datatypes, see section 4.1 of the MPI 3.1 Standard.</p>
<h3 id="data-buffers"><a href="#data-buffers">Data Buffers</a></h3>
<p>A <code>Buffer</code> describes a specific piece of data in memory that MPI should operate on. In addition
to specifying the datatype of the data. It knows the address in memory where the data begins
and how many instances of the datatype are contained in the data. The <code>Buffer</code> trait is
implemented for slices that contain types implementing <code>Equivalence</code>.</p>
<p>In order to use arbitrary datatypes to describe the contents of a slice, the <code>View</code> type is
provided. However, since it can be used to instruct the underlying MPI implementation to
rummage around arbitrary parts of memory, its constructors are currently marked unsafe.</p>
<h2 id="unfinished-features"><a href="#unfinished-features">Unfinished features</a></h2>
<ul>
<li><strong>4.1.3</strong>: Subarray datatype constructors, <code>MPI_Type_create_subarray()</code>,</li>
<li><strong>4.1.4</strong>: Distributed array datatype constructors, <code>MPI_Type_create_darray()</code></li>
<li><strong>4.1.5</strong>: Address and size functions, <code>MPI_Get_address()</code>, <code>MPI_Aint_add()</code>,
<code>MPI_Aint_diff()</code>, <code>MPI_Type_size()</code>, <code>MPI_Type_size_x()</code></li>
<li><strong>4.1.7</strong>: Extent and bounds of datatypes: <code>MPI_Type_get_extent()</code>,
<code>MPI_Type_get_extent_x()</code>, <code>MPI_Type_create_resized()</code></li>
<li><strong>4.1.8</strong>: True extent of datatypes, <code>MPI_Type_get_true_extent()</code>,
<code>MPI_Type_get_true_extent_x()</code></li>
<li><strong>4.1.11</strong>: <code>MPI_Get_elements()</code>, <code>MPI_Get_elements_x()</code></li>
<li><strong>4.1.13</strong>: Decoding a datatype, <code>MPI_Type_get_envelope()</code>, <code>MPI_Type_get_contents()</code></li>
<li><strong>4.3</strong>: Canonical pack and unpack, <code>MPI_Pack_external()</code>, <code>MPI_Unpack_external()</code>,
<code>MPI_Pack_external_size()</code></li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="traits/index.html" title="mod mpi::datatype::traits">traits</a></div><div class="desc docblock-short">Datatype traits</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DatatypeRef.html" title="struct mpi::datatype::DatatypeRef">DatatypeRef</a></div><div class="desc docblock-short">A reference to an MPI data type.</div></li><li><div class="item-name"><a class="struct" href="struct.DynBuffer.html" title="struct mpi::datatype::DynBuffer">DynBuffer</a></div><div class="desc docblock-short">An immutable dynamically-typed buffer.</div></li><li><div class="item-name"><a class="struct" href="struct.DynBufferMut.html" title="struct mpi::datatype::DynBufferMut">DynBufferMut</a></div><div class="desc docblock-short">A mutable dynamically-typed buffer.</div></li><li><div class="item-name"><a class="struct" href="struct.MutView.html" title="struct mpi::datatype::MutView">MutView</a></div><div class="desc docblock-short">A buffer with a user specified count and datatype</div></li><li><div class="item-name"><a class="struct" href="struct.Partition.html" title="struct mpi::datatype::Partition">Partition</a></div><div class="desc docblock-short">Adds a partitioning to an existing <code>Buffer</code> so that it becomes <code>Partitioned</code></div></li><li><div class="item-name"><a class="struct" href="struct.PartitionMut.html" title="struct mpi::datatype::PartitionMut">PartitionMut</a></div><div class="desc docblock-short">Adds a partitioning to an existing <code>BufferMut</code> so that it becomes <code>Partitioned</code></div></li><li><div class="item-name"><a class="struct" href="struct.UncommittedDatatypeRef.html" title="struct mpi::datatype::UncommittedDatatypeRef">UncommittedDatatypeRef</a></div><div class="desc docblock-short">A reference to an uncommitted, or potentially uncommitted, MPI data type.</div></li><li><div class="item-name"><a class="struct" href="struct.UncommittedUserDatatype.html" title="struct mpi::datatype::UncommittedUserDatatype">UncommittedUserDatatype</a></div><div class="desc docblock-short">Represents an MPI datatype that has not yet been committed. Can be used to build up more complex
datatypes before committing.</div></li><li><div class="item-name"><a class="struct" href="struct.UserDatatype.html" title="struct mpi::datatype::UserDatatype">UserDatatype</a></div><div class="desc docblock-short">A user defined MPI datatype</div></li><li><div class="item-name"><a class="struct" href="struct.View.html" title="struct mpi::datatype::View">View</a></div><div class="desc docblock-short">A buffer with a user specified count and datatype</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.AsDatatype.html" title="trait mpi::datatype::AsDatatype">AsDatatype</a></div><div class="desc docblock-short">Something that has an associated datatype</div></li><li><div class="item-name"><a class="trait" href="trait.Buffer.html" title="trait mpi::datatype::Buffer">Buffer</a></div><div class="desc docblock-short">A buffer is a region in memory that starts at <code>pointer()</code> and contains <code>count()</code> copies of
<code>as_datatype()</code>.</div></li><li><div class="item-name"><a class="trait" href="trait.BufferMut.html" title="trait mpi::datatype::BufferMut">BufferMut</a></div><div class="desc docblock-short">A mutable buffer is a region in memory that starts at <code>pointer_mut()</code> and contains <code>count()</code>
copies of <code>as_datatype()</code>.</div></li><li><div class="item-name"><a class="trait" href="trait.Collection.html" title="trait mpi::datatype::Collection">Collection</a></div><div class="desc docblock-short">A countable collection of things.</div></li><li><div class="item-name"><a class="trait" href="trait.Datatype.html" title="trait mpi::datatype::Datatype">Datatype</a></div><div class="desc docblock-short">A Datatype describes the layout of messages in memory.</div></li><li><div class="item-name"><a class="trait" href="trait.Equivalence.html" title="trait mpi::datatype::Equivalence">Equivalence</a></div><div class="desc docblock-short">A direct equivalence exists between the implementing type and an MPI datatype</div></li><li><div class="item-name"><a class="trait" href="trait.Partitioned.html" title="trait mpi::datatype::Partitioned">Partitioned</a></div><div class="desc docblock-short">Describes how a <code>Buffer</code> is partitioned by specifying the count of elements and displacement
from the start of the buffer for each partition.</div></li><li><div class="item-name"><a class="trait" href="trait.PartitionedBuffer.html" title="trait mpi::datatype::PartitionedBuffer">PartitionedBuffer</a></div><div class="desc docblock-short">A buffer that is <code>Partitioned</code></div></li><li><div class="item-name"><a class="trait" href="trait.PartitionedBufferMut.html" title="trait mpi::datatype::PartitionedBufferMut">PartitionedBufferMut</a></div><div class="desc docblock-short">A mutable buffer that is <code>Partitioned</code></div></li><li><div class="item-name"><a class="trait" href="trait.Pointer.html" title="trait mpi::datatype::Pointer">Pointer</a></div><div class="desc docblock-short">Provides a pointer to the starting address in memory.</div></li><li><div class="item-name"><a class="trait" href="trait.PointerMut.html" title="trait mpi::datatype::PointerMut">PointerMut</a></div><div class="desc docblock-short">Provides a mutable pointer to the starting address in memory.</div></li><li><div class="item-name"><a class="trait" href="trait.UncommittedDatatype.html" title="trait mpi::datatype::UncommittedDatatype">UncommittedDatatype</a></div><div class="desc docblock-short">An UncommittedDatatype is a partial description of the layout of messages in memory which may
not yet have been committed to an implementation-defined message format.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.address_of.html" title="fn mpi::datatype::address_of">address_of</a></div><div class="desc docblock-short">Returns the address of the argument in a format suitable for use with datatype constructors</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.SystemDatatype.html" title="type mpi::datatype::SystemDatatype">SystemDatatype</a></div><div class="desc docblock-short">A system datatype, e.g. <code>MPI_FLOAT</code></div></li></ul></section></div></main></body></html>